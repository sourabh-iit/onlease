{"version":3,"sources":["./src/admin/services/map.service.ts","./src/admin/admin-routing.module.ts","./src/admin/admin.module.ts","./src/admin/components/map/map.component.ts","./src/admin/components/map/map.component.html"],"names":[],"mappings":"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","file":"admin-admin-module.js","sourcesContent":["import { HttpClient } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\n\n\n@Injectable()\nexport class MapService {\n    constructor(\n        private http: HttpClient\n    ) {}\n\n    loadLodgings() {\n        const url = '/api/admin/map/lodgings';\n        return this.http.get(url);\n    }\n}","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { MapComponent } from './components/map/map.component';\n\n\nconst routes: Routes = [\n  {\n    path: 'map',\n    component: MapComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AdminRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\nimport { AdminRoutingModule } from './admin-routing.module';\nimport { MapService } from './services/map.service';\n\n@NgModule({\n  declarations: [\n  ],\n  imports: [\n    ReactiveFormsModule,\n    SharedModule,\n    AdminRoutingModule\n  ],\n  providers: [\n    MapService\n  ]\n})\nexport class AdminModule { }\n","import { Component, ElementRef, OnDestroy, ViewChild } from \"@angular/core\";\nimport { Subscription } from \"rxjs\";\nimport { MapService } from \"src/admin/services/map.service\";\n\nimport { ScriptLoadingService } from \"src/app/services/loadscript.service\";\n\n\n@Component({\n    templateUrl: './map.component.html',\n    styleUrls: ['map.component.scss']\n})\nexport class MapComponent implements OnDestroy {\n    @ViewChild('mapContainer') mapContainer!: ElementRef;\n    private map!: any;\n    private subs = new Subscription();\n    private data: any = [];\n\n    constructor(\n        private scriptLoader: ScriptLoadingService,\n        private mapService: MapService\n    ) {\n        this.loadMapScript();\n        this.loadData();\n    }\n\n    loadData() {\n        this.subs.add(this.mapService.loadLodgings().subscribe((data: any) => {\n            this.data = data;\n            this.renderMap();\n        }));\n    }\n\n    loadMapScript() {\n        this.scriptLoader.loadScript('googleMap').then(() => {\n            this.map = new google.maps.Map(this.mapContainer.nativeElement);\n            this.renderMap();\n        });\n    }\n\n    renderMap() {\n        if(this.map && this.data.length > 0) {\n            var bounds = new google.maps.LatLngBounds();\n            let coordinates: any = [];\n            for (var i = 0; i < this.data.length; i++) {\n                coordinates = this.data[i].latlng.split(',');\n                bounds.extend({\n                    lat: parseFloat(coordinates[1]),\n                    lng: parseFloat(coordinates[2])\n                });\n            }\n            this.map.fitBounds(bounds);\n        }\n    }\n\n    ngOnDestroy() {\n        this.subs.unsubscribe();\n    }\n}","<div #mapContainer></div>"],"sourceRoot":"webpack:///"}