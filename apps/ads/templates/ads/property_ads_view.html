{% extends 'base_templates/ad_list.html' %} 
{% load widget_tweaks %} 
{% block title %}OnLease{% endblock %} 
{% load static %}
{% load i18n %}
{% load lodging_filters %}

{% block content %}
<div id="ads_wrapper" class="row">
	{% for ad in ads %}
	<div class="card col-xs-12 col-sm-6 col-md-4 col-lg-3">
		<div>
      {% if not ad.images.first %}
      <img class="card-img-top" src="{% static 'images/No-image-available.jpg' %}" alt="">
      {% else %}
      <div id="ad_images_carousel_{{forloop.counter0}}" data-pause="true" class="carousel slide carousel-fade" data-ride="false">
          <ol class="carousel-indicators">
            {% for image in ad.images.all %}
            <li data-target="#ad_images_carousel_{{forloop.counter0}}" data-slide-to="{{forloop.counter0}}"{% if forloop.first %} class="active"{% endif %}></li>
            {% endfor %}
          </ol>
          <div class="carousel-inner" role="listbox">
            {% for image in ad.images.all %}
              {% if forloop.first %}
              <div class="carousel-item active">
                <div class="view">
                  <img class="d-block w-100 cursor-zoom-in" src="{{image.image_thumbnail.url}}"  alt="{{ad.title}}"
                    onclick="display_full_screen_carousel([{% for image in ad.images.all %}'{{image.image.url}}',{% endfor %}],'{{ad.rent}}','{{ad.region}}','{{ad | full_form:'type' }}','{{ad.available_from}}','{{ad.title}}')">
              {% else %}
              <div class="carousel-item">
                <div class="view">
                  <img class="d-block w-100 cursor-zoom-in" src="" data-src="{{image.image_thumbnail.url}}" alt="{{ad.title}}"
                  onclick="display_full_screen_carousel([{% for image in ad.images.all %}'{{image.image.url}}',{% endfor %}],'{{ad.rent}}','{{ad.region}}','{{ad | full_form:'type' }}','{{ad.available_from}}','{{ad.title}}')">
              {% endif %}
                </div>
                <div class="carousel-caption">
                  Image tag here
                </div>
              </div>
            {% endfor %}
          </div>
          {% if ad.images.count > 1 %}
          <a class="carousel-control-prev" href="#ad_images_carousel_{{forloop.counter0}}" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#ad_images_carousel_{{forloop.counter0}}" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
          {% endif %}
      </div>
      {% endif %}
    </div>
    <div class="row m-0 links">
      {% if ad.images.count > 0 %}
      <div class="col" onclick="display_full_screen_carousel([{% for image in ad.images.all %}'{{image.image.url}}',{% endfor %}],'{{ad.rent}}','{{ad.region}}','{{ad | full_form:'type' }}','{{ad.available_from}}','{{ad.title}}')">
        <i class="fa fa-search-plus"></i>
        Zoom
      </div>
      {% endif %}
      <div class="col" onclick="redirect_to_ad_detail_view('{{ad.id}}')">
        <i class="fa fa-external-link"></i>
        View details
      </div>
    </div>
    <div class="rounded-bottom mdb-color lighten-3 text-center pt-3">
      <ul class="list-unstyled list-inline font-small">
        <li class="list-inline-item pr-2 white-text">
          <div class="pink-text">
            <small>Rent</small>
          </div>
          <div>
            <i class="fa fa-inr pr-1"></i>{{ad.rent}}
          </div>
        </li>
        {% if ad.lodging_type == 'O' %}
        <li class="list-inline-item pr-2 white-text">
          <div class="pink-text">
            <small>Type</small>
          </div>
          <div>
            <i class="fa fa-home pr-1"></i>{{ad.lodging_type_other}}
          </div>
        </li>
        {% else %}
        <li class="list-inline-item pr-2 white-text">
          <div class="pink-text">
            <small>Type</small>
          </div>
          <div>
            <i class="fa fa-home pr-1"></i>{{ad | full_form:'type' | fixed_length:'11'}}
          </div>
        </li>
        {% endif %}
        <li class="list-inline-item pr-2 white-text">
          <div class="pink-text">
            <small>Available from</small>
          </div>
          <div>
            <i class="fa fa-clock-o pr-1"></i>{{ad.available_from | date:'d-m-Y'}}
          </div>
        </li>
      </ul>
    </div>
    <div class="teal-text p-1 location-detail bg-grey">
      <small><i class="fa fa-map-marker"></i> {{ad.region}}</small>
    </div>
	</div>
	{% endfor %}
</div>
<script>
  var detail_view_url = '{% url "ads:ad-detail-view" %}';
</script>
{% endblock %}